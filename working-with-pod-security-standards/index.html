<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Working with Pod Security Standards | Linuxera</title><meta name=keywords content="kubernetes,k8s,security,capabilities,securitycontext,admission"><meta name=description content="Working with Pod Security Standards In Kubernetes v1.25 Pod Security admission has moved to stable, replacing Pod Security Policy admission. This feature has been in beta and enabled by default since Kubernetes v1.23 in this post we are going to cover what&rsquo;s new with Pod Security Admission (PSA) and how it affects the workloads being deployed in our clusters.
Note
For this post I&rsquo;ll be running a Kubernetes v1.25 cluster. If you want to try this in your own environment you can use your favorite tool to get a K8s cluster up and running, I&rsquo;ll be using kcli."><meta name=author content="Mario"><link rel=canonical href=https://linuxera.org/working-with-pod-security-standards/><link crossorigin=anonymous href=/assets/css/stylesheet.8cc7ef3cdd44c5188f9267864f378d8dd8892d583e0fd07b5e5321e496f1e4d1.css integrity="sha256-jMfvPN1ExRiPkmeGTzeNjdiJLVg+D9B7XlMh5Jbx5NE=" rel="preload stylesheet" as=style><link rel=icon href=https://linuxera.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://linuxera.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://linuxera.org/favicon-32x32.png><link rel=apple-touch-icon href=https://linuxera.org/apple-touch-icon.png><link rel=mask-icon href=https://linuxera.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-7598JKCK1E"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7598JKCK1E",{anonymize_ip:!1})}</script><meta property="og:title" content="Working with Pod Security Standards"><meta property="og:description" content="Working with Pod Security Standards In Kubernetes v1.25 Pod Security admission has moved to stable, replacing Pod Security Policy admission. This feature has been in beta and enabled by default since Kubernetes v1.23 in this post we are going to cover what&rsquo;s new with Pod Security Admission (PSA) and how it affects the workloads being deployed in our clusters.
Note
For this post I&rsquo;ll be running a Kubernetes v1.25 cluster. If you want to try this in your own environment you can use your favorite tool to get a K8s cluster up and running, I&rsquo;ll be using kcli."><meta property="og:type" content="article"><meta property="og:url" content="https://linuxera.org/working-with-pod-security-standards/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-24T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-24T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Working with Pod Security Standards"><meta name=twitter:description content="Working with Pod Security Standards In Kubernetes v1.25 Pod Security admission has moved to stable, replacing Pod Security Policy admission. This feature has been in beta and enabled by default since Kubernetes v1.23 in this post we are going to cover what&rsquo;s new with Pod Security Admission (PSA) and how it affects the workloads being deployed in our clusters.
Note
For this post I&rsquo;ll be running a Kubernetes v1.25 cluster. If you want to try this in your own environment you can use your favorite tool to get a K8s cluster up and running, I&rsquo;ll be using kcli."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://linuxera.org/posts/"},{"@type":"ListItem","position":2,"name":"Working with Pod Security Standards","item":"https://linuxera.org/working-with-pod-security-standards/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Working with Pod Security Standards","name":"Working with Pod Security Standards","description":"Working with Pod Security Standards In Kubernetes v1.25 Pod Security admission has moved to stable, replacing Pod Security Policy admission. This feature has been in beta and enabled by default since Kubernetes v1.23 in this post we are going to cover what\u0026rsquo;s new with Pod Security Admission (PSA) and how it affects the workloads being deployed in our clusters.\nNote\nFor this post I\u0026rsquo;ll be running a Kubernetes v1.25 cluster. If you want to try this in your own environment you can use your favorite tool to get a K8s cluster up and running, I\u0026rsquo;ll be using kcli.","keywords":["kubernetes","k8s","security","capabilities","securitycontext","admission"],"articleBody":"Working with Pod Security Standards In Kubernetes v1.25 Pod Security admission has moved to stable, replacing Pod Security Policy admission. This feature has been in beta and enabled by default since Kubernetes v1.23 in this post we are going to cover what’s new with Pod Security Admission (PSA) and how it affects the workloads being deployed in our clusters.\nNote\nFor this post I’ll be running a Kubernetes v1.25 cluster. If you want to try this in your own environment you can use your favorite tool to get a K8s cluster up and running, I’ll be using kcli.\n# Create a Kubernetes 1.25 cluster with 1 master and 1 worker using calico as SDN, nginx as ingress controller, metallb for loadbalancer services and CRI-O as container runtime kcli create kube generic -P ctlplanes=1 -P workers=1 -P ctlplane_memory=4096 -P numcpus=2 -P worker_memory=4096 -P sdn=calico -P version=1.25 -P ingress=true -P ingress_method=nginx -P metallb=true -P engine=crio -P domain=linuxera.org psa-cluster This is how our cluster looks like:\nkubectl get nodes NAME STATUS ROLES AGE VERSION psa-cluster-master-0.linuxera.org Ready control-plane,master 4m19s v1.25.0 psa-cluster-worker-0.linuxera.org Ready worker 1m20s v1.25.0 Pod Security Admission The Pod Security Admission relies on both Pod Security Standards which define the different security policies that need to be checked for workloads and Pod Admission Modes that define how the standards are applied for a given namespace.\nPod Security Standards This new admission plugin relies on pre-backed Pod Security Standards. These standards will evolve every Kubernetes release to include / adapt new security rules.\nAs of Kubernetes v1.25 there are three Pod Security Standards defined:\nNote\nYou can read each standard requirements on this link.\nprivileged baseline restricted Pod Admission Modes The cluster admin/namespace admin can configure an admission mode that will be used to do admission validations against workloads being deployed in the namespace. There are three admission modes that can be configured on a namespace:\nenforce: Policy violations will cause the pod to be rejected. audit: Policy violations will be logged in the audit log, pod will be allowed. warn: Policy violations will cause a user-facing warning, pod will be allowed. Each mode can be configured with a different Pod Security Standard. For example, a namespace could enforce using the privileged standard and audit/warn via therestricted standard.\nThe admission modes and the standards to be used are configured at the namespace level via the use of the pod-security.kubernetes.io/: label.\nAs earlier mentioned, these Pod Security Standards will evolve over time, and since these are versioned we can specify which version of a specific mode we want to enforce via the use of the pod-security.kubernetes.io/-version: label, where refers to a Kubernetes minor version like v1.25.\nIf we put all this information together, we can get to a namespace definition like the one below:\nNote\nIn the example below we use the version v1.25, a namespace could also point to the latest available by using latest instead.\napiVersion: v1 kind: Namespace metadata: name: test-namespace labels: pod-security.kubernetes.io/enforce: privileged pod-security.kubernetes.io/enforce-version: v1.25 pod-security.kubernetes.io/audit: restricted pod-security.kubernetes.io/audit-version: v1.25 pod-security.kubernetes.io/warn: restricted pod-security.kubernetes.io/warn-version: v1.25 It’s important to mention that audit and warning modes are applied to workload resources (resources that have a pod template definition) like Deployments, Jobs, etc. to help catch violations early. On the other hand, enforce mode is applied to the resulting pod object.\nPod Security Admission Configuration Pod Security Admission comes pre-configured in Kubernetes v1.25 with the least restrictive policy, it’s possible to modify the default configuration by modifying the admission configuration for this plugin, you can read here how to do it.\nIf you checked the link above, you have seen that exemptions can be configured for the admission, this will allow the cluster admin to configure users, runtime classes or namespaces that won’t be evaluated by PSA. From this three exemptions, the runtime class could be helpful if you want to keep a namespace as restrictive as possible by default, but then have some workload that is not evaluated against a PSA.\nPod Security Standards in Action Now that we know the basics around PSA, we can go ahead and run some tests to understand how it works. We will be using a simple go app.\nNon-restrictive namespace In this first example we’re going to deploy our workload in a namespace that enforces the privileged standard and audits/warns the restricted standard.\nCreate the namespace for our workload with the appropriated PSA settings:\ncat \u003c","wordCount":"1596","inLanguage":"en","datePublished":"2022-08-24T00:00:00Z","dateModified":"2022-08-24T00:00:00Z","author":{"@type":"Person","name":"Mario"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://linuxera.org/working-with-pod-security-standards/"},"publisher":{"@type":"Organization","name":"Linuxera","logo":{"@type":"ImageObject","url":"https://linuxera.org/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://linuxera.org/ accesskey=h title="Linuxera (Alt + H)">Linuxera</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://linuxera.org/ title="🏠 Home"><span>🏠 Home</span></a></li><li><a href=https://linuxera.org/archives/ title="🗄️ Archive"><span>🗄️ Archive</span></a></li><li><a href=https://linuxera.org/search/ title="🔎 Search"><span>🔎 Search</span></a></li><li><a href=https://linuxera.org/tags/ title="🏷️ Tags"><span>🏷️ Tags</span></a></li><li><a href=https://linuxera.org/presentations/ title="🎴 Presentations"><span>🎴 Presentations</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://linuxera.org/>Home</a>&nbsp;»&nbsp;<a href=https://linuxera.org/posts/>Posts</a></div><h1 class=post-title>Working with Pod Security Standards</h1><div class=post-meta><span title='2022-08-24 00:00:00 +0000 UTC'>Published on August 24, 2022</span>&nbsp;·&nbsp;<span title='2022-08-24 00:00:00 +0000 UTC'>Last updated on August 24, 2022</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Mario</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#working-with-pod-security-standards aria-label="Working with Pod Security Standards">Working with Pod Security Standards</a><ul><li><a href=#pod-security-admission aria-label="Pod Security Admission">Pod Security Admission</a><ul><li><a href=#pod-security-standards aria-label="Pod Security Standards">Pod Security Standards</a></li><li><a href=#pod-admission-modes aria-label="Pod Admission Modes">Pod Admission Modes</a></li><li><a href=#pod-security-admission-configuration aria-label="Pod Security Admission Configuration">Pod Security Admission Configuration</a></li></ul></li><li><a href=#pod-security-standards-in-action aria-label="Pod Security Standards in Action">Pod Security Standards in Action</a><ul><li><a href=#non-restrictive-namespace aria-label="Non-restrictive namespace">Non-restrictive namespace</a></li><li><a href=#restrictive-namespace aria-label="Restrictive namespace">Restrictive namespace</a></li><li><a href=#tip-1---check-if-a-given-workload-would-be-rejected-in-a-given-namespace aria-label="Tip 1 - Check if a given workload would be rejected in a given namespace">Tip 1 - Check if a given workload would be rejected in a given namespace</a></li><li><a href=#tip-2---check-if-workloads-on-a-given-namespace-would-violate-a-given-policy aria-label="Tip 2 - Check if workloads on a given namespace would violate a given policy">Tip 2 - Check if workloads on a given namespace would violate a given policy</a></li></ul></li><li><a href=#closing-thoughts aria-label="Closing Thoughts">Closing Thoughts</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=working-with-pod-security-standards>Working with Pod Security Standards<a hidden class=anchor aria-hidden=true href=#working-with-pod-security-standards>#</a></h1><p>In Kubernetes v1.25 Pod Security admission has moved to stable, replacing Pod Security Policy admission. This feature has been in beta and enabled by default since Kubernetes v1.23 in this post we are going to cover what&rsquo;s new with Pod Security Admission (PSA) and how it affects the workloads being deployed in our clusters.</p><div class="admonition tip"><p class=admonition-title>Note</p><p class=admonition>For this post I&rsquo;ll be running a Kubernetes v1.25 cluster. If you want to try this in your own environment you can use your favorite tool to get a K8s cluster up and running, I&rsquo;ll be using <a href=https://github.com/karmab/kcli>kcli</a>.</p></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Create a Kubernetes 1.25 cluster with 1 master and 1 worker using calico as SDN, nginx as ingress controller, metallb for loadbalancer services and CRI-O as container runtime</span>
</span></span><span class=line><span class=cl>kcli create kube generic -P <span class=nv>ctlplanes</span><span class=o>=</span><span class=m>1</span> -P <span class=nv>workers</span><span class=o>=</span><span class=m>1</span>  -P <span class=nv>ctlplane_memory</span><span class=o>=</span><span class=m>4096</span> -P <span class=nv>numcpus</span><span class=o>=</span><span class=m>2</span> -P <span class=nv>worker_memory</span><span class=o>=</span><span class=m>4096</span> -P <span class=nv>sdn</span><span class=o>=</span>calico -P <span class=nv>version</span><span class=o>=</span>1.25 -P <span class=nv>ingress</span><span class=o>=</span><span class=nb>true</span> -P <span class=nv>ingress_method</span><span class=o>=</span>nginx -P <span class=nv>metallb</span><span class=o>=</span><span class=nb>true</span> -P <span class=nv>engine</span><span class=o>=</span>crio -P <span class=nv>domain</span><span class=o>=</span>linuxera.org psa-cluster
</span></span></code></pre></div><p>This is how our cluster looks like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl get nodes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                STATUS   ROLES                  AGE     VERSION
</span></span><span class=line><span class=cl>psa-cluster-master-0.linuxera.org   Ready    control-plane,master   4m19s   v1.25.0
</span></span><span class=line><span class=cl>psa-cluster-worker-0.linuxera.org   Ready    worker                 1m20s   v1.25.0
</span></span></code></pre></div><h2 id=pod-security-admission>Pod Security Admission<a hidden class=anchor aria-hidden=true href=#pod-security-admission>#</a></h2><p>The Pod Security Admission relies on both Pod Security Standards which define the different security policies that need to be checked for workloads and Pod Admission Modes that define how the standards are applied for a given namespace.</p><h3 id=pod-security-standards>Pod Security Standards<a hidden class=anchor aria-hidden=true href=#pod-security-standards>#</a></h3><p>This new admission plugin relies on pre-backed <a href=https://kubernetes.io/docs/concepts/security/pod-security-standards>Pod Security Standards</a>. These standards will evolve every Kubernetes release to include / adapt new security rules.</p><p>As of Kubernetes v1.25 there are three Pod Security Standards defined:</p><div class="admonition tip"><p class=admonition-title>Note</p><p class=admonition>You can read each standard requirements on <a href=https://kubernetes.io/docs/concepts/security/pod-security-standards>this link</a>.</p></div><ul><li><code>privileged</code></li><li><code>baseline</code></li><li><code>restricted</code></li></ul><h3 id=pod-admission-modes>Pod Admission Modes<a hidden class=anchor aria-hidden=true href=#pod-admission-modes>#</a></h3><p>The cluster admin/namespace admin can configure an admission mode that will be used to do admission validations against workloads being deployed in the namespace. There are three admission modes that can be configured on a namespace:</p><ul><li><code>enforce</code>: Policy violations will cause the pod to be rejected.</li><li><code>audit</code>: Policy violations will be logged in the audit log, pod will be allowed.</li><li><code>warn</code>: Policy violations will cause a user-facing warning, pod will be allowed.</li></ul><p>Each mode can be configured with a different Pod Security Standard. For example, a namespace could enforce using the <code>privileged</code> standard and audit/warn via the<code>restricted</code> standard.</p><p>The admission modes and the standards to be used are configured at the namespace level via the use of the <code>pod-security.kubernetes.io/&lt;MODE>: &lt;LEVEL></code> label.</p><p>As earlier mentioned, these Pod Security Standards will evolve over time, and since these are versioned we can specify which version of a specific mode we want to enforce via the use of the <code>pod-security.kubernetes.io/&lt;MODE>-version: &lt;VERSION></code> label, where &lt;VERSION> refers to a Kubernetes minor version like <code>v1.25</code>.</p><p>If we put all this information together, we can get to a namespace definition like the one below:</p><div class="admonition tip"><p class=admonition-title>Note</p><p class=admonition>In the example below we use the version <code>v1.25</code>, a namespace could also point to the latest available by using <code>latest</code> instead.</p></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test-namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pod-security.kubernetes.io/enforce</span><span class=p>:</span><span class=w> </span><span class=l>privileged</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pod-security.kubernetes.io/enforce-version</span><span class=p>:</span><span class=w> </span><span class=l>v1.25</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pod-security.kubernetes.io/audit</span><span class=p>:</span><span class=w> </span><span class=l>restricted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pod-security.kubernetes.io/audit-version</span><span class=p>:</span><span class=w> </span><span class=l>v1.25</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pod-security.kubernetes.io/warn</span><span class=p>:</span><span class=w> </span><span class=l>restricted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pod-security.kubernetes.io/warn-version</span><span class=p>:</span><span class=w> </span><span class=l>v1.25</span><span class=w>
</span></span></span></code></pre></div><p>It&rsquo;s important to mention that audit and warning modes are applied to workload resources (resources that have a pod template definition) like Deployments, Jobs, etc. to help catch violations early. On the other hand, enforce mode is applied to the resulting pod object.</p><h3 id=pod-security-admission-configuration>Pod Security Admission Configuration<a hidden class=anchor aria-hidden=true href=#pod-security-admission-configuration>#</a></h3><p>Pod Security Admission comes pre-configured in Kubernetes v1.25 with the least restrictive policy, it&rsquo;s possible to modify the default configuration by modifying the admission configuration for this plugin, you can read <a href=https://kubernetes.io/docs/tasks/configure-pod-container/enforce-standards-admission-controller/#configure-the-admission-controller>here</a> how to do it.</p><p>If you checked the link above, you have seen that exemptions can be configured for the admission, this will allow the cluster admin to configure users, runtime classes or namespaces that won&rsquo;t be evaluated by PSA. From this three exemptions, the runtime class could be helpful if you want to keep a namespace as restrictive as possible by default, but then have some workload that is not evaluated against a PSA.</p><h2 id=pod-security-standards-in-action>Pod Security Standards in Action<a hidden class=anchor aria-hidden=true href=#pod-security-standards-in-action>#</a></h2><p>Now that we know the basics around PSA, we can go ahead and run some tests to understand how it works. We will be using a <a href=https://github.com/mvazquezc/reverse-words>simple go app</a>.</p><h3 id=non-restrictive-namespace>Non-restrictive namespace<a hidden class=anchor aria-hidden=true href=#non-restrictive-namespace>#</a></h3><p>In this first example we&rsquo;re going to deploy our workload in a namespace that enforces the <code>privileged</code> standard and audits/warns the <code>restricted</code> standard.</p><ol><li><p>Create the namespace for our workload with the appropriated PSA settings:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span class=line><span class=cl><span class=s>apiVersion: v1
</span></span></span><span class=line><span class=cl><span class=s>kind: Namespace
</span></span></span><span class=line><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=cl><span class=s>  name: non-restrictive-namespace
</span></span></span><span class=line><span class=cl><span class=s>  labels:
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/enforce: privileged
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/enforce-version: v1.25
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/audit: restricted
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/audit-version: v1.25
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/warn: restricted
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/warn-version: v1.25
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div></li><li><p>Create the workload:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | kubectl -n non-restrictive-namespace apply -f -
</span></span></span><span class=line><span class=cl><span class=s>apiVersion: apps/v1
</span></span></span><span class=line><span class=cl><span class=s>kind: Deployment
</span></span></span><span class=line><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=cl><span class=s>  labels:
</span></span></span><span class=line><span class=cl><span class=s>    app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  name: go-app
</span></span></span><span class=line><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=cl><span class=s>  replicas: 1
</span></span></span><span class=line><span class=cl><span class=s>  selector:
</span></span></span><span class=line><span class=cl><span class=s>    matchLabels:
</span></span></span><span class=line><span class=cl><span class=s>      app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  strategy: {}
</span></span></span><span class=line><span class=cl><span class=s>  template:
</span></span></span><span class=line><span class=cl><span class=s>    metadata:
</span></span></span><span class=line><span class=cl><span class=s>      labels:
</span></span></span><span class=line><span class=cl><span class=s>        app: go-app
</span></span></span><span class=line><span class=cl><span class=s>    spec:
</span></span></span><span class=line><span class=cl><span class=s>      containers:
</span></span></span><span class=line><span class=cl><span class=s>      - image: quay.io/mavazque/reversewords:latest
</span></span></span><span class=line><span class=cl><span class=s>        name: reversewords
</span></span></span><span class=line><span class=cl><span class=s>        resources: {}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div></li></ol><p>We got some client warnings (caused by the warn mode) saying the violations of our workload when checked against the <code>restricted</code> standard:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Warning: would violate PodSecurity <span class=s2>&#34;restricted:v1.25&#34;</span>: allowPrivilegeEscalation !<span class=o>=</span> <span class=nb>false</span> <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.allowPrivilegeEscalation<span class=o>=</span><span class=nb>false</span><span class=o>)</span>, unrestricted capabilities <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.capabilities.drop<span class=o>=[</span><span class=s2>&#34;ALL&#34;</span><span class=o>])</span>, runAsNonRoot !<span class=o>=</span> <span class=nb>true</span> <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.runAsNonRoot<span class=o>=</span><span class=nb>true</span><span class=o>)</span>, seccompProfile <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.seccompProfile.type to <span class=s2>&#34;RuntimeDefault&#34;</span> or <span class=s2>&#34;Localhost&#34;</span><span class=o>)</span>
</span></span></code></pre></div><p>But the workload is running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl -n non-restrictive-namespace get pod
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>go-app-5b954b7b74-kwkwn   1/1     Running   <span class=m>0</span>          1m30s
</span></span></code></pre></div><p>In the next scenario we will configure the enforce mode to the restricted standard.</p><h3 id=restrictive-namespace>Restrictive namespace<a hidden class=anchor aria-hidden=true href=#restrictive-namespace>#</a></h3><ol><li><p>Create the namespace for our workload with the appropriated PSA settings:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span class=line><span class=cl><span class=s>apiVersion: v1
</span></span></span><span class=line><span class=cl><span class=s>kind: Namespace
</span></span></span><span class=line><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=cl><span class=s>  name: restrictive-namespace
</span></span></span><span class=line><span class=cl><span class=s>  labels:
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/enforce: restricted
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/enforce-version: v1.25
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/audit: restricted
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/audit-version: v1.25
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/warn: restricted
</span></span></span><span class=line><span class=cl><span class=s>    pod-security.kubernetes.io/warn-version: v1.25
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div></li><li><p>Create the workload:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | kubectl -n restrictive-namespace apply -f -
</span></span></span><span class=line><span class=cl><span class=s>apiVersion: apps/v1
</span></span></span><span class=line><span class=cl><span class=s>kind: Deployment
</span></span></span><span class=line><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=cl><span class=s>  labels:
</span></span></span><span class=line><span class=cl><span class=s>    app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  name: go-app
</span></span></span><span class=line><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=cl><span class=s>  replicas: 1
</span></span></span><span class=line><span class=cl><span class=s>  selector:
</span></span></span><span class=line><span class=cl><span class=s>    matchLabels:
</span></span></span><span class=line><span class=cl><span class=s>      app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  strategy: {}
</span></span></span><span class=line><span class=cl><span class=s>  template:
</span></span></span><span class=line><span class=cl><span class=s>    metadata:
</span></span></span><span class=line><span class=cl><span class=s>      labels:
</span></span></span><span class=line><span class=cl><span class=s>        app: go-app
</span></span></span><span class=line><span class=cl><span class=s>    spec:
</span></span></span><span class=line><span class=cl><span class=s>      containers:
</span></span></span><span class=line><span class=cl><span class=s>      - image: quay.io/mavazque/reversewords:latest
</span></span></span><span class=line><span class=cl><span class=s>        name: reversewords
</span></span></span><span class=line><span class=cl><span class=s>        resources: {}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div></li></ol><p>Again, we got some client warnings (caused by the warn mode) saying the violations of our workload when checked against the <code>restricted</code> standard:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Warning: would violate PodSecurity <span class=s2>&#34;restricted:v1.25&#34;</span>: allowPrivilegeEscalation !<span class=o>=</span> <span class=nb>false</span> <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.allowPrivilegeEscalation<span class=o>=</span><span class=nb>false</span><span class=o>)</span>, unrestricted capabilities <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.capabilities.drop<span class=o>=[</span><span class=s2>&#34;ALL&#34;</span><span class=o>])</span>, runAsNonRoot !<span class=o>=</span> <span class=nb>true</span> <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.runAsNonRoot<span class=o>=</span><span class=nb>true</span><span class=o>)</span>, seccompProfile <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.seccompProfile.type to <span class=s2>&#34;RuntimeDefault&#34;</span> or <span class=s2>&#34;Localhost&#34;</span><span class=o>)</span>
</span></span></code></pre></div><p>And this time, the workload is NOT running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl -n restrictive-namespace get pod
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>No resources found in restrictive-namespace namespace.
</span></span></code></pre></div><p>If you remember, the enforce mode is applied against the pod object and not against the workload objects (like Deployment in this case). That&rsquo;s why the deployment was admitted but the pod it&rsquo;s not.</p><p>We can see in the namespace events / replicaset status why the pod is not running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl -n restrictive-namespace get events
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>LAST SEEN   TYPE      REASON              OBJECT                         MESSAGE
</span></span><span class=line><span class=cl>3m44s       Warning   FailedCreate        replicaset/go-app-5b954b7b74   Error creating: pods <span class=s2>&#34;go-app-5b954b7b74-dfq9g&#34;</span> is forbidden: violates PodSecurity <span class=s2>&#34;restricted:v1.25&#34;</span>: allowPrivilegeEscalation !<span class=o>=</span> <span class=nb>false</span> <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.allowPrivilegeEscalation<span class=o>=</span><span class=nb>false</span><span class=o>)</span>, unrestricted capabilities <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.capabilities.drop<span class=o>=[</span><span class=s2>&#34;ALL&#34;</span><span class=o>])</span>, runAsNonRoot !<span class=o>=</span> <span class=nb>true</span> <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.runAsNonRoot<span class=o>=</span><span class=nb>true</span><span class=o>)</span>, seccompProfile <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.seccompProfile.type to <span class=s2>&#34;RuntimeDefault&#34;</span> or <span class=s2>&#34;Localhost&#34;</span><span class=o>)</span>
</span></span></code></pre></div><p>If we want this workload to be admitted in the cluster we need to fine tune the pod&rsquo;s configuration, let&rsquo;s remove the deployment and get it created with a config allowed by the <code>restricted</code> standard.</p><ol><li><p>Remove the deployment</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl -n restrictive-namespace delete deployment go-app
</span></span></code></pre></div></li><li><p>Create the workload with the proper config:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | kubectl -n restrictive-namespace apply -f -
</span></span></span><span class=line><span class=cl><span class=s>apiVersion: apps/v1
</span></span></span><span class=line><span class=cl><span class=s>kind: Deployment
</span></span></span><span class=line><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=cl><span class=s>  labels:
</span></span></span><span class=line><span class=cl><span class=s>    app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  name: go-app
</span></span></span><span class=line><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=cl><span class=s>  replicas: 1
</span></span></span><span class=line><span class=cl><span class=s>  selector:
</span></span></span><span class=line><span class=cl><span class=s>    matchLabels:
</span></span></span><span class=line><span class=cl><span class=s>      app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  strategy: {}
</span></span></span><span class=line><span class=cl><span class=s>  template:
</span></span></span><span class=line><span class=cl><span class=s>    metadata:
</span></span></span><span class=line><span class=cl><span class=s>      labels:
</span></span></span><span class=line><span class=cl><span class=s>        app: go-app
</span></span></span><span class=line><span class=cl><span class=s>    spec:
</span></span></span><span class=line><span class=cl><span class=s>      containers:
</span></span></span><span class=line><span class=cl><span class=s>      - image: quay.io/mavazque/reversewords:latest
</span></span></span><span class=line><span class=cl><span class=s>        name: reversewords
</span></span></span><span class=line><span class=cl><span class=s>        resources: {}
</span></span></span><span class=line><span class=cl><span class=s>        securityContext:
</span></span></span><span class=line><span class=cl><span class=s>          allowPrivilegeEscalation: false
</span></span></span><span class=line><span class=cl><span class=s>          capabilities:
</span></span></span><span class=line><span class=cl><span class=s>            drop:
</span></span></span><span class=line><span class=cl><span class=s>              - ALL
</span></span></span><span class=line><span class=cl><span class=s>          runAsNonRoot: true
</span></span></span><span class=line><span class=cl><span class=s>          runAsUser: 1024
</span></span></span><span class=line><span class=cl><span class=s>          seccompProfile:
</span></span></span><span class=line><span class=cl><span class=s>            type: RuntimeDefault
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div></li></ol><p>This time we didn&rsquo;t get any warnings and if we check for pods in the namespace we will see our workload is running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl -n restrictive-namespace get pod
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>go-app-5f45c655b6-z26kv   1/1     Running   <span class=m>0</span>          25s
</span></span></code></pre></div><h3 id=tip-1---check-if-a-given-workload-would-be-rejected-in-a-given-namespace>Tip 1 - Check if a given workload would be rejected in a given namespace<a hidden class=anchor aria-hidden=true href=#tip-1---check-if-a-given-workload-would-be-rejected-in-a-given-namespace>#</a></h3><p>You can try to create a workload against a given namespace in dry-run mode and get client warnings, example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | kubectl -n restrictive-namespace apply --dry-run=server -f - 
</span></span></span><span class=line><span class=cl><span class=s>apiVersion: apps/v1
</span></span></span><span class=line><span class=cl><span class=s>kind: Deployment
</span></span></span><span class=line><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=cl><span class=s>  labels:
</span></span></span><span class=line><span class=cl><span class=s>    app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  name: go-app
</span></span></span><span class=line><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=cl><span class=s>  replicas: 1
</span></span></span><span class=line><span class=cl><span class=s>  selector:
</span></span></span><span class=line><span class=cl><span class=s>    matchLabels:
</span></span></span><span class=line><span class=cl><span class=s>      app: go-app
</span></span></span><span class=line><span class=cl><span class=s>  strategy: {}
</span></span></span><span class=line><span class=cl><span class=s>  template:
</span></span></span><span class=line><span class=cl><span class=s>    metadata:
</span></span></span><span class=line><span class=cl><span class=s>      labels:
</span></span></span><span class=line><span class=cl><span class=s>        app: go-app
</span></span></span><span class=line><span class=cl><span class=s>    spec:
</span></span></span><span class=line><span class=cl><span class=s>      containers:
</span></span></span><span class=line><span class=cl><span class=s>      - image: quay.io/mavazque/reversewords:latest
</span></span></span><span class=line><span class=cl><span class=s>        name: reversewords
</span></span></span><span class=line><span class=cl><span class=s>        resources: {}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>You will get a warning like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Warning: would violate PodSecurity <span class=s2>&#34;restricted:v1.25&#34;</span>: allowPrivilegeEscalation !<span class=o>=</span> <span class=nb>false</span> <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.allowPrivilegeEscalation<span class=o>=</span><span class=nb>false</span><span class=o>)</span>, unrestricted capabilities <span class=o>(</span>container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.capabilities.drop<span class=o>=[</span><span class=s2>&#34;ALL&#34;</span><span class=o>])</span>, runAsNonRoot !<span class=o>=</span> <span class=nb>true</span> <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.runAsNonRoot<span class=o>=</span><span class=nb>true</span><span class=o>)</span>, seccompProfile <span class=o>(</span>pod or container <span class=s2>&#34;reversewords&#34;</span> must <span class=nb>set</span> securityContext.seccompProfile.type to <span class=s2>&#34;RuntimeDefault&#34;</span> or <span class=s2>&#34;Localhost&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>deployment.apps/go-app created <span class=o>(</span>server dry run<span class=o>)</span>
</span></span></code></pre></div><h3 id=tip-2---check-if-workloads-on-a-given-namespace-would-violate-a-given-policy>Tip 2 - Check if workloads on a given namespace would violate a given policy<a hidden class=anchor aria-hidden=true href=#tip-2---check-if-workloads-on-a-given-namespace-would-violate-a-given-policy>#</a></h3><p>You can try to label a namespace in dry-run mode and get client warnings, as an example let&rsquo;s see what would happen if we moved the namespace from the first scenario from the <code>privileged</code> standard to the <code>restricted</code> one:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl label --dry-run<span class=o>=</span>server --overwrite ns non-restrictive-namespace pod-security.kubernetes.io/enforce<span class=o>=</span>restricted
</span></span></code></pre></div><p>You will get a warning like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Warning: existing pods in namespace <span class=s2>&#34;non-restrictive-namespace&#34;</span> violate the new PodSecurity enforce level <span class=s2>&#34;restricted:v1.25&#34;</span>
</span></span><span class=line><span class=cl>Warning: go-app-5b954b7b74-kwkwn: allowPrivilegeEscalation !<span class=o>=</span> false, unrestricted capabilities, runAsNonRoot !<span class=o>=</span> true, seccompProfile
</span></span><span class=line><span class=cl>namespace/non-restrictive-namespace labeled
</span></span></code></pre></div><h2 id=closing-thoughts>Closing Thoughts<a hidden class=anchor aria-hidden=true href=#closing-thoughts>#</a></h2><p>Pod Security Admission is a great addition to the Kubernetes security, I hope this time its adoption increases compared to PSPs. In the next post we will talk about the new changes around Seccomp that were introduced in Kubernetes.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://linuxera.org/tags/kubernetes/>kubernetes</a></li><li><a href=https://linuxera.org/tags/k8s/>k8s</a></li><li><a href=https://linuxera.org/tags/security/>security</a></li><li><a href=https://linuxera.org/tags/capabilities/>capabilities</a></li><li><a href=https://linuxera.org/tags/securitycontext/>securitycontext</a></li><li><a href=https://linuxera.org/tags/admission/>admission</a></li></ul><nav class=paginav><a class=prev href=https://linuxera.org/user-certificates-in-openshift4/><span class=title>« Prev</span><br><span>OpenShift 4 User Certificates</span></a>
<a class=next href=https://linuxera.org/capabilities-seccomp-kubernetes/><span class=title>Next »</span><br><span>Capabilities and Seccomp Profiles on Kubernetes</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Working with Pod Security Standards on twitter" href="https://twitter.com/intent/tweet/?text=Working%20with%20Pod%20Security%20Standards&url=https%3a%2f%2flinuxera.org%2fworking-with-pod-security-standards%2f&hashtags=kubernetes%2ck8s%2csecurity%2ccapabilities%2csecuritycontext%2cadmission"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Working with Pod Security Standards on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2flinuxera.org%2fworking-with-pod-security-standards%2f&title=Working%20with%20Pod%20Security%20Standards&summary=Working%20with%20Pod%20Security%20Standards&source=https%3a%2f%2flinuxera.org%2fworking-with-pod-security-standards%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></div></footer><div class=share-buttons><p>If this post has been helpful to you, consider <u><a target=_blank href=https://ko-fi.com/mvazce>supporting the work.</a></u></p></div><script src=https://utteranc.es/client.js repo=mvazquezc/mvazquezc.github.io issue-term=pathname label=blog-comments theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://linuxera.org/>Linuxera</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>